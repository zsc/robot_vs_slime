# 第4章：敌人系统

## 章节概述

本章详细描述《机械军团大战史莱姆》中的敌人系统设计。敌人以原神世界的原魔为原型，主要包括各种元素史莱姆、丘丘人、深渊法师等。每种敌人都有独特的行为模式、元素属性和战术特点。敌人系统采用波次进攻机制，随着关卡推进，敌人的种类、数量和强度都会逐步提升。

## 目录

1. [敌人系统概述](#敌人系统概述)
2. [史莱姆基础单位](#史莱姆基础单位)
3. [精英敌人](#精英敌人)
4. [Boss设计](#boss设计)
5. [敌人行为模式](#敌人行为模式)
6. [波次配置系统](#波次配置系统)

## 敌人系统概述

### 设计理念

敌人系统的核心设计理念是创造多样化的威胁，迫使玩家采用不同的防御策略。通过元素属性、移动方式、攻击模式的组合，形成丰富的敌人生态系统。

### 敌人分级

#### 普通级（1星）
- **血量范围**: 100-300
- **移动速度**: 1.0-1.5格/秒
- **威胁等级**: 低
- **出现时机**: 游戏前期，作为基础敌人
- **掉落太阳能**: 25-50

#### 精英级（2星）
- **血量范围**: 500-1000
- **移动速度**: 0.8-1.2格/秒
- **威胁等级**: 中
- **出现时机**: 游戏中期，混合在普通敌人中
- **掉落太阳能**: 75-150
- **特殊能力**: 护盾、冲刺、召唤等

#### 领主级（3星）
- **血量范围**: 2000-5000
- **移动速度**: 0.5-1.0格/秒
- **威胁等级**: 高
- **出现时机**: 波次末尾，作为挑战
- **掉落太阳能**: 200-500
- **特殊能力**: 多重护盾、范围攻击、元素爆发

#### Boss级（4星）
- **血量范围**: 10000-50000
- **移动速度**: 0.3-0.8格/秒
- **威胁等级**: 极高
- **出现时机**: 章节末尾，独立波次
- **掉落太阳能**: 1000-2000
- **特殊能力**: 阶段变化、召唤小怪、全屏技能

### 元素属性系统

#### 元素克制关系
- **火克冰**: 造成150%伤害，融化效果
- **水克火**: 造成150%伤害，蒸发效果
- **雷克水**: 造成150%伤害，感电效果
- **冰克草**: 造成150%伤害，冻结效果
- **草克岩**: 造成150%伤害，种子效果
- **风（中性）**: 扩散其他元素
- **岩（防御）**: 减少所有伤害25%

### 移动类型

#### 地面移动
- **普通行走**: 标准移动速度
- **爬行**: 速度较慢但稳定
- **冲刺**: 短时间内高速移动
- **跳跃**: 可以越过低矮障碍

#### 飞行移动
- **低空飞行**: 可被防空单位攻击
- **高空飞行**: 只能被特定防空单位攻击
- **俯冲**: 快速下降攻击

#### 水中移动
- **游泳**: 在水路上移动
- **潜水**: 短时间内无法被攻击
- **水面滑行**: 高速水面移动

## 史莱姆基础单位

### 普通史莱姆

#### 火史莱姆
- **血量**: 150
- **移动速度**: 1.2格/秒
- **元素**: 火
- **攻击方式**: 接触爆炸
- **特殊能力**: 死亡时爆炸，对周围造成火元素伤害
- **弱点**: 水元素攻击
- **外观描述**: 橙红色球体，表面有火焰纹路，跳跃移动时留下火星轨迹

#### 水史莱姆
- **血量**: 180
- **移动速度**: 1.0格/秒
- **元素**: 水
- **攻击方式**: 水弹投射
- **特殊能力**: 每3秒产生水泡护盾（吸收50点伤害）
- **弱点**: 雷元素攻击
- **外观描述**: 蓝色半透明球体，表面有水波纹路，移动时溅起水花

#### 雷史莱姆
- **血量**: 120
- **移动速度**: 1.5格/秒
- **元素**: 雷
- **攻击方式**: 放电攻击
- **特殊能力**: 攻击时有30%概率麻痹机械单位1秒
- **弱点**: 岩元素攻击
- **外观描述**: 紫色球体，周身环绕电弧，快速弹跳移动

#### 冰史莱姆
- **血量**: 200
- **移动速度**: 0.8格/秒
- **元素**: 冰
- **攻击方式**: 冰刺投射
- **特殊能力**: 被攻击时有20%概率冻结攻击者1秒
- **弱点**: 火元素攻击
- **外观描述**: 淡蓝色晶体球体，表面有冰晶装饰，移动时留下霜冻痕迹

#### 草史莱姆
- **血量**: 160
- **移动速度**: 1.1格/秒
- **元素**: 草
- **攻击方式**: 藤蔓缠绕
- **特殊能力**: 每5秒恢复20点血量
- **弱点**: 火元素攻击
- **外观描述**: 绿色球体，顶部有花朵装饰，身体覆盖藤蔓

#### 风史莱姆
- **血量**: 100
- **移动速度**: 2.0格/秒
- **元素**: 风
- **攻击方式**: 风刃切割
- **特殊能力**: 飞行单位，免疫地面攻击
- **弱点**: 任意两种元素组合攻击
- **外观描述**: 青色半透明球体，始终漂浮在空中，周围有气流环绕

#### 岩史莱姆
- **血量**: 300
- **移动速度**: 0.6格/秒
- **元素**: 岩
- **攻击方式**: 岩石投掷
- **特殊能力**: 护甲值50（减免物理伤害）
- **弱点**: 草元素攻击
- **外观描述**: 褐色岩石球体，表面有矿石结晶，移动时地面震动

### 变异史莱姆

#### 大型史莱姆
- **血量**: 500
- **移动速度**: 0.5格/秒
- **特殊能力**: 死亡时分裂成2个对应元素的普通史莱姆
- **出现条件**: 10关后开始出现
- **外观描述**: 体型为普通史莱姆的2倍，颜色更深

#### 突变史莱姆
- **血量**: 250
- **移动速度**: 随机变化（0.5-2.0格/秒）
- **特殊能力**: 每5秒随机切换元素属性
- **出现条件**: 15关后开始出现
- **外观描述**: 彩虹色渐变，不断变换颜色

## 精英敌人

### 丘丘人系列

#### 丘丘人
- **血量**: 400
- **移动速度**: 1.0格/秒
- **攻击方式**: 木棒近战
- **特殊能力**: 群体出现，相互掩护
- **行为模式**: 
  - 优先攻击最近的机械单位
  - 血量低于30%时进入狂暴状态（攻击速度+50%）
- **外观描述**: 矮小人形生物，戴着面具，手持木棒

#### 丘丘射手
- **血量**: 300
- **移动速度**: 1.2格/秒
- **攻击方式**: 火箭远程攻击
- **特殊能力**: 攻击距离5格，可以越过前排单位攻击
- **行为模式**:
  - 保持3格安全距离
  - 优先攻击输出最高的机械单位
- **外观描述**: 手持弓箭，背着箭筒，动作敏捷

#### 丘丘暴徒
- **血量**: 800
- **移动速度**: 0.8格/秒
- **攻击方式**: 巨斧横扫
- **特殊能力**: 攻击造成范围伤害（3×3格）
- **行为模式**:
  - 冲锋状态免疫减速
  - 每击杀一个单位回复100血量
- **外观描述**: 体型庞大，手持巨斧，肌肉发达

#### 丘丘萨满
- **血量**: 500
- **移动速度**: 0.9格/秒
- **攻击方式**: 元素法术
- **特殊能力**: 
  - 为周围敌人提供元素护盾
  - 召唤元素图腾
- **行为模式**:
  - 躲在其他敌人后方
  - 优先给精英单位加护盾
- **外观描述**: 戴着华丽面具，手持法杖，周身环绕元素光环

### 深渊使徒

#### 深渊咏者·渊火
- **血量**: 1500
- **移动速度**: 1.0格/秒
- **元素**: 火
- **攻击方式**: 火焰弹幕
- **特殊能力**:
  - 火焰护盾（吸收500伤害）
  - 范围火焰爆发（5×5格）
- **行为模式**:
  - 护盾破碎后进入狂暴
  - 定期召唤火史莱姆
- **外观描述**: 身披火焰长袍，手持烈焰法杖，漂浮移动

#### 深渊咏者·激流
- **血量**: 1500
- **移动速度**: 1.0格/秒
- **元素**: 水
- **攻击方式**: 水刃斩击
- **特殊能力**:
  - 水流护盾（吸收500伤害）
  - 创造水域地形（减速区域）
- **行为模式**:
  - 利用水域限制机械单位移动
  - 护盾恢复机制（每10秒恢复200护盾）
- **外观描述**: 蓝色长袍，周身水流环绕，优雅移动

### 特殊精英

#### 遗迹守卫
- **血量**: 2000
- **移动速度**: 0.7格/秒
- **攻击方式**: 激光扫射
- **特殊能力**:
  - 物理护甲100
  - 旋转攻击（360度范围）
  - 导弹发射（锁定后排）
- **弱点**: 核心暴露时承受200%伤害
- **外观描述**: 古代机械造型，单眼发光，四肢修长

#### 无相元素
- **血量**: 1800
- **移动速度**: 传送移动
- **元素**: 随机
- **攻击方式**: 元素轰炸
- **特殊能力**:
  - 元素免疫（免疫同属性伤害）
  - 核心防护（只在攻击时暴露核心）
  - 元素风暴（全屏攻击）
- **外观描述**: 几何立方体组合，中心有发光核心

## Boss设计

### 第一章Boss：史莱姆王

#### 基础属性
- **血量**: 15000
- **移动速度**: 0.5格/秒
- **元素**: 多元素
- **体型**: 占据3×3格

#### 阶段设计

**第一阶段（100%-70%血量）**
- **主要攻击**: 史莱姆雨（全屏召唤小史莱姆）
- **特殊能力**: 元素转换（每20秒切换元素属性）
- **防御机制**: 基础护甲50

**第二阶段（70%-30%血量）**
- **主要攻击**: 弹跳冲击（大范围AOE）
- **特殊能力**: 分裂（产生2个小型分身）
- **防御机制**: 元素护盾轮转

**第三阶段（30%-0%血量）**
- **主要攻击**: 狂暴连击
- **特殊能力**: 吸收场上史莱姆回复血量
- **防御机制**: 减伤光环（减免50%伤害）

### 第二章Boss：深渊法师·雷鸣

#### 基础属性
- **血量**: 25000
- **移动速度**: 瞬移
- **元素**: 雷
- **特殊机制**: 护盾系统

#### 阶段设计

**第一阶段（100%-75%血量）**
- **雷元素护盾**: 10000点护盾值
- **主要攻击**: 
  - 连锁闪电（跳跃3次）
  - 雷电法阵（持续区域伤害）
- **特殊机制**: 护盾存在时免疫所有控制

**第二阶段（75%-40%血量）**
- **召唤雷灵**: 每30秒召唤3个雷元素造物
- **主要攻击**:
  - 雷暴轰击（5×5范围）
  - 电磁脉冲（瘫痪机械2秒）
- **特殊机制**: 雷电领域（全场带电，持续伤害）

**第三阶段（40%-0%血量）**
- **终极形态**: 化身雷电元素体
- **主要攻击**:
  - 天雷审判（锁定高威胁单位）
  - 雷光柱（横扫全场）
- **特殊机制**: 每损失10%血量释放一次全屏电爆

### 第三章Boss：无相之岩

#### 基础属性
- **血量**: 30000
- **移动速度**: 0.3格/秒
- **元素**: 岩
- **特殊机制**: 核心暴露系统

#### 战斗机制

**核心防护模式**
- 立方体围绕核心旋转，完全免伤
- 持续15秒后进入攻击模式
- 攻击模式持续5秒，核心暴露

**攻击模式技能组**
- **重力冲击**: 将机械单位吸向中心
- **岩柱森林**: 随机位置生成岩柱阻挡
- **陨石轰炸**: 标记区域后落下巨石
- **震地波**: 地面波纹扩散攻击

**复活机制**
- 血量归零后进入复活阶段
- 生成3个岩元素晶体
- 15秒内不摧毁晶体则满血复活
- 每场战斗只能复活一次

### 海战章节Boss：深海龙蜥

#### 基础属性
- **血量**: 35000
- **移动速度**: 水中2.0格/秒，陆地0.5格/秒
- **元素**: 水/冰双元素
- **特殊地形**: 战场50%为水域

#### 独特机制

**潜水系统**
- 潜入水中3秒，期间无法被攻击
- 浮出时造成巨浪冲击
- 可在水下快速移动到任意水域位置

**冰封技能**
- **冰河时代**: 将水域冻结成冰面
- **冰晶喷射**: 扇形冰晶弹幕
- **永冻领域**: 降低全场机械攻速50%

**狂暴机制**
- 血量每降低25%提升一层狂暴
- 每层狂暴提升20%攻击和移动速度
- 4层狂暴时解锁绝技"深海啸"

## 敌人行为模式

### 基础AI行为

#### 路径选择
- **最短路径**: 默认选择到达基地的最短路线
- **避障移动**: 自动绕过障碍物和机械单位
- **动态寻路**: 路径被阻断时重新计算路线

#### 目标优先级
1. **威胁评估**: 优先攻击对自身威胁最大的单位
2. **血量判断**: 倾向攻击低血量单位
3. **距离因素**: 攻击范围内最近的目标
4. **特殊克制**: 优先攻击被克制的元素单位

### 群体行为

#### 集群移动
- **小队编制**: 同类型敌人自动编队
- **速度同步**: 小队成员速度统一为最慢单位速度
- **阵型保持**: 尽可能保持初始阵型

#### 协同作战
- **掩护射手**: 近战单位保护远程单位
- **集火目标**: 精英单位标记目标供群体攻击
- **技能连携**: 不同敌人技能形成配合

### 特殊行为模式

#### 召唤师行为
- **保持距离**: 始终保持在后排
- **优先召唤**: 场上召唤物少于3个时立即召唤
- **撤退机制**: 血量低于30%时后撤

#### 自爆单位行为
- **冲锋模式**: 发现目标后直线冲锋
- **连锁反应**: 爆炸可能引爆附近同类
- **倒计时**: 接近目标3秒后爆炸

#### 治疗单位行为
- **优先治疗**: 治疗血量百分比最低的友军
- **群体治疗**: 范围内多个单位受伤时使用群疗
- **自我保护**: 自身血量低于50%优先自疗

### 环境互动

#### 地形利用
- **高地优势**: 远程单位寻找高地射击
- **掩体使用**: 利用地形掩体规避攻击
- **水域优势**: 水属性敌人在水中移速+50%

#### 天气适应
- **雨天**: 水、雷属性敌人伤害+20%
- **晴天**: 火、草属性敌人伤害+20%
- **雪天**: 冰属性敌人伤害+20%，其他敌人移速-20%

## 波次配置系统

### 波次生成规则

#### 难度曲线
- **开场预热**: 1-3波，少量基础敌人
- **逐步提升**: 4-8波，混合敌人组合
- **高潮迭起**: 9-12波，精英敌人登场
- **最终挑战**: 13-15波，Boss或大量精英

#### 敌人组合原则
- **元素搭配**: 避免相克元素同时出现
- **速度梯度**: 快慢敌人交替，创造压力节奏
- **强弱结合**: 精英配合杂兵，平衡难度

### 波次间隔系统

#### 标准间隔
- **普通难度**: 20秒
- **困难难度**: 15秒
- **深渊难度**: 10秒
- **手动触发**: 玩家可提前触发下一波（奖励太阳能）

#### 动态间隔
- **残余敌人**: 场上敌人少于3个时缩短间隔
- **玩家状态**: 防御薄弱时延长间隔
- **连胜奖励**: 完美防御后缩短下波间隔

### 特殊波次

#### 奖励波次
- **黄金史莱姆**: 高额太阳能奖励，快速移动
- **宝箱怪**: 击败后掉落永久强化道具
- **出现概率**: 每5波有20%概率出现

#### 精英波次
- **纯精英波**: 3-5个精英敌人
- **护卫阵型**: 1个领主+多个精英护卫
- **出现时机**: 特定关卡的第10波

#### 无尽模式波次
- **递增系统**: 每波敌人属性提升5%
- **混沌组合**: 随机敌人类型和数量
- **里程碑奖励**: 每10波获得特殊奖励

### 波次数据配置示例

#### 第1-10关标准配置

**第1关**
- 波次1: 火史莱姆×3
- 波次2: 水史莱姆×5
- 波次3: 火史莱姆×3 + 水史莱姆×3
- 波次4: 雷史莱姆×4
- 波次5: 混合史莱姆×8

**第5关**
- 波次1: 快速史莱姆×5
- 波次2: 岩史莱姆×3 + 火史莱姆×5
- 波次3: 丘丘人×2 + 史莱姆×6
- 波次4: 大型史莱姆×1 + 普通史莱姆×8
- 波次5: 丘丘射手×3 + 丘丘人×5

**第10关（Boss关）**
- 波次1: 预热波，普通敌人×10
- 波次2: 精英护卫×2
- 波次3: 史莱姆王（Boss）
- 波次4: 残余清理波
- 波次5: 胜利奖励波（黄金史莱姆×5）

### 关卡特殊机制

#### 限时挑战
- **时间限制**: 3分钟内击败所有敌人
- **加速奖励**: 提前完成获得额外太阳能
- **失败惩罚**: 超时后敌人获得狂暴加成

#### 资源限制
- **限定太阳能**: 初始太阳能固定，无产出
- **限定单位**: 只能使用特定类型机械
- **策略考验**: 考验资源分配能力

#### 生存挑战
- **无尽波次**: 坚持时间越长奖励越丰厚
- **递增难度**: 每30秒敌人强度提升
- **排行榜**: 记录最长生存时间

---

*注：所有数值均为基础值，实际游戏中会根据难度和关卡进行调整。敌人的视觉设计详见 [assets/enemy.html](assets/enemy.html)。*